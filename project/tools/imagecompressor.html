
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>image compressor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content=" image compressor — kompres gambar langsung di browser, cepat, aman, tanpa upload.">

<style>
*{box-sizing:border-box;font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif}
body{
  margin:0;
  background:#0f172a;
  color:#e5e7eb;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:20px
}
.card{
  background:#020617;
  border-radius:18px;
  padding:26px;
  max-width:440px;
  width:100%;
  box-shadow:0 25px 50px rgba(0,0,0,.55)
}
h1{
  text-align:center;
  margin:0 0 6px;
  font-size:22px;
  font-weight:800;
  text-transform:lowercase
}
p{text-align:center;font-size:14px;opacity:.85}
.info{
  font-size:12px;
  text-align:center;
  opacity:.6;
  margin-bottom:16px
}
input[type=file]{
  width:100%;
  padding:14px;
  background:#020617;
  color:#e5e7eb;
  border:1px dashed #334155;
  border-radius:12px;
  cursor:pointer
}
button{
  width:100%;
  margin-top:18px;
  padding:14px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#38bdf8,#6366f1);
  color:#020617;
  font-size:15px;
  font-weight:700;
  cursor:pointer
}
button:disabled{opacity:.6;cursor:not-allowed}
.result{
  display:none;
  margin-top:22px;
  text-align:center
}
.preview{
  margin-top:12px;
  max-width:100%;
  border-radius:10px
}
.stats{
  font-size:13px;
  opacity:.8;
  margin-top:8px
}
a.download{
  display:inline-block;
  margin-top:12px;
  font-weight:700;
  color:#38bdf8;
  text-decoration:none
}
footer{
  margin-top:20px;
  text-align:center;
  font-size:12px;
  opacity:.45
}
</style>
</head>

<body>
<div class="card">
  <h1> image compressor</h1>
  <p>Kompres otomatis, visual tetap tajam</p>
  <div class="info">Diproses 100% di browser • tidak ada upload</div>

  <input type="file" id="imageInput" accept="image/*">
  <button id="btn" onclick="compressImage()">Kompres Sekarang</button>

  <div class="result" id="result">
    <img id="preview" class="preview">
    <div class="stats" id="stats"></div>
    <a id="downloadLink" class="download" download>⬇ Download hasil</a>
  </div>

  <footer>Ansyah.tools</footer>
</div>

<script>
function formatSize(bytes){
  return bytes < 1024*1024
    ? (bytes/1024).toFixed(1)+" KB"
    : (bytes/1024/1024).toFixed(2)+" MB";
}

function compressImage(){
  const input=document.getElementById("imageInput");
  const file=input.files[0];
  if(!file){alert("Pilih gambar terlebih dahulu");return}

  const btn=document.getElementById("btn");
  btn.disabled=true;
  btn.textContent="Mengompres...";

  const reader=new FileReader();
  reader.readAsDataURL(file);

  reader.onload=e=>{
    const img=new Image();
    img.src=e.target.result;

    img.onload=()=>{
      const canvas=document.createElement("canvas");
      const ctx=canvas.getContext("2d");

      const MAX=1920;
      const scale=Math.min(1,MAX/img.width);
      canvas.width=img.width*scale;
      canvas.height=img.height*scale;

      ctx.drawImage(img,0,0,canvas.width,canvas.height);

      canvas.toBlob(blob=>{
        const url=URL.createObjectURL(blob);

        document.getElementById("preview").src=url;
        document.getElementById("downloadLink").href=url;
        document.getElementById("downloadLink").download="ansyah-"+file.name;

        const saved=100-(blob.size/file.size*100);
        document.getElementById("stats").innerHTML=
          `${formatSize(file.size)} → ${formatSize(blob.size)}<br>hemat ${saved.toFixed(0)}%`;

        document.getElementById("result").style.display="block";
        document.getElementById("result").scrollIntoView({behavior:"smooth"});

        btn.disabled=false;
        btn.textContent="Kompres Sekarang";
      },"image/jpeg",0.8);
    };
  };
}
</script>
</body>
</html>
